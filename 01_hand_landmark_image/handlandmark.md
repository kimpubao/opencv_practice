# ğŸ¯ OpenCV + MediaPipe ê¸°ë°˜ ê°ì²´ ì¸ì‹ ì—°ìŠµ í”„ë¡œì íŠ¸

ì´ í”„ë¡œì íŠ¸ëŠ” Pythonì˜ OpenCVì™€ MediaPipe ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬
**ì–¼êµ´ ì¸ì‹, ì† ë§ˆë”” ì¸ì‹, ëª¸ ìì„¸ ì¸ì‹ ë“± ë‹¤ì–‘í•œ ì‹œê°ì  ê°ì²´ ì¸ì‹**ì„ ì—°ìŠµí•˜ê¸° ìœ„í•œ í•™ìŠµìš© ë ˆí¬ì§€í† ë¦¬ì…ë‹ˆë‹¤.

**ì‹¤ì‹œê°„ ì›¹ìº  ì˜ìƒ ì²˜ë¦¬**, **FHD í•´ìƒë„ ì§€ì›**, **ì¢Œí‘œ ì‹œê°í™”/ì €ì¥** ë“± ë‹¤ì–‘í•œ ì—°ìŠµì„ í†µí•´
LLM / RAG ê¸°ë°˜ ë©€í‹°ëª¨ë‹¬ ì²˜ë¦¬ íë¦„ì—ì„œ ì¤‘ìš”í•œ **ë¹„ì •í˜• ì…ë ¥ ì „ì²˜ë¦¬ ê¸°ìˆ **ì„ ìŠµë“í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

---

## ğŸ“‘ ëª©ì°¨

1. [ì† ë§ˆë”” ì¸ì‹ (Hand Landmark Detection)](#ì†-ë§ˆë””-ì¸ì‹-hand-landmark-detection)
2. [ì†ê°€ë½ ê°œìˆ˜ ì¸ì‹ (Finger Counting)](#ì†ê°€ë½-ê°œìˆ˜-ì¸ì‹-finger-counting)

---

## ğŸ“¦ ì‚¬ìš© í™˜ê²½ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „

```text
Python 3.10.x ê¸°ì¤€

opencv-python   == 4.11.0.86
mediapipe       == 0.10.5
protobuf        == 3.20.3
numpy           == 1.26.4
```

---

## âœ‹ ì† ë§ˆë”” ì¸ì‹ (Hand Landmark Detection)

ì´ ì‹¤ìŠµì€ OpenCVì™€ MediaPipeë¥¼ ì´ìš©í•˜ì—¬
**ì‹¤ì‹œê°„ ì† ë§ˆë””(21ê°œ í¬ì¸íŠ¸) ì¸ì‹ ë° ì‹œê°í™”**ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.

* MediaPipeì˜ `Hands` ì†”ë£¨ì…˜ì„ ì´ìš©í•˜ì—¬ **ì‹¤ì‹œê°„ ì† ì¶”ì **
* ìµœëŒ€ 2ê°œì˜ ì†ì„ ì¶”ì í•˜ë©°, **ê° ë§ˆë””ì™€ ì—°ê²°ì„  ì‹œê°í™”**
* FHD í•´ìƒë„(`1920x1080`)ë¡œ ì›¹ìº  í”„ë ˆì„ ì²˜ë¦¬

---

## ğŸ“½ï¸ ì˜ˆì œ ì˜ìƒ

| ì˜ˆì‹œ ì˜ìƒ                                                           |
| --------------------------------------------------------------- |
| â–¶ï¸ [hand\_landmark\_video.mp4 (ì˜ìƒ ë³´ê¸°)](hand_landmark_video.mp4) |

> â„¹ï¸ GitHubì—ì„œëŠ” ìë™ ì¬ìƒë˜ì§€ ì•Šìœ¼ë©°, í´ë¦­í•˜ë©´ ë‹¤ìš´ë¡œë“œ ë˜ëŠ” ìƒˆ íƒ­ì—ì„œ ì—´ë¦½ë‹ˆë‹¤.

---

## ğŸ’» ì‚¬ìš© ì½”ë“œ: `01_hand_landmark_video.py`

```python
# í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (protobuf ì¶©ëŒ ìš°íšŒìš©)
import os
os.environ["PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION"] = "python"

# í•„ìš”í•œ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
import cv2
import mediapipe as mp

# MediaPipe ëª¨ë“ˆ ì´ˆê¸°í™”
mp_hands = mp.solutions.hands
mp_drawing = mp.solutions.drawing_utils

# ì›¹ìº  ì—´ê¸°
cap = cv2.VideoCapture(0)
cap.set(cv2.CAP_PROP_FRAME_WIDTH, 1920)
cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 1080)

with mp_hands.Hands(
    max_num_hands=2,
    min_detection_confidence=0.7,
    min_tracking_confidence=0.5
) as hands:
    while cap.isOpened():
        ret, frame = cap.read()
        if not ret:
            print("ì¹´ë©”ë¼ì—ì„œ í”„ë ˆì„ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")
            break

        frame = cv2.flip(frame, 1)
        rgb = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
        result = hands.process(rgb)

        if result.multi_hand_landmarks:
            for hand in result.multi_hand_landmarks:
                mp_drawing.draw_landmarks(
                    frame,
                    hand,
                    mp_hands.HAND_CONNECTIONS
                )

        cv2.imshow('ğŸ“¸ Hand Tracking (Press Q to quit)', frame)

        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

cap.release()
cv2.destroyAllWindows()
```

---

## ğŸ§© ì£¼ìš” íŠ¹ì§• ë° ì˜µì…˜ ì„¤ëª…

| ì„¤ì • í•­ëª©                      | ì„¤ëª…                                           |
| -------------------------- | -------------------------------------------- |
| `max_num_hands=2`          | ìµœëŒ€ 2ê°œì˜ ì† ì¸ì‹ (ê¸°ë³¸ê°’ì€ 1, 3 ì´ìƒì€ ì •í™•ë„ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŒ)     |
| `min_detection_confidence` | ì†ì´ ì¡´ì¬í•˜ëŠ”ì§€ íŒë‹¨í•˜ëŠ” ì‹ ë¢°ë„ (0\~1 ì‚¬ì´, ì¼ë°˜ì ìœ¼ë¡œ 0.7 ì´ìƒ ê¶Œì¥) |
| `min_tracking_confidence`  | ì¶”ì ì˜ ì•ˆì •ì„± íŒë‹¨ ê¸°ì¤€ (0.5 ì´ìƒì´ë©´ ì¶©ë¶„íˆ ì•ˆì •ì )             |
| `cap.set(CV_CAP_PROP_*)`   | í•´ìƒë„ ì„¤ì •: HD (1280x720), FHD (1920x1080) ë“± ê°€ëŠ¥  |

---

## âœ… ì°¸ê³  ì‚¬í•­

* `protobuf` ì˜¤ë¥˜ í•´ê²°ì„ ìœ„í•´ í™˜ê²½ ë³€ìˆ˜ `PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python` ì‚¬ìš©
* `cv2.flip`ì€ ì˜ìƒ ì¢Œìš° ë°˜ì „(ê±°ìš¸ íš¨ê³¼) ì ìš©ìš©
* `mp_drawing.draw_landmarks`ëŠ” ì† ë§ˆë”” ë° ì—°ê²°ì„  ìë™ ì‹œê°í™”

---

## âœŒï¸ ì†ê°€ë½ ê°œìˆ˜ ì¸ì‹ (Finger Counting)

ì´ ì‹¤ìŠµì€ ì† ë§ˆë”” ì¢Œí‘œë¥¼ ê¸°ë°˜ìœ¼ë¡œ
**í´ì§„ ì†ê°€ë½ì˜ ê°œìˆ˜ë¥¼ ì¸ì‹í•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ«ì ì¶œë ¥**í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.

* MediaPipeê°€ ì œê³µí•˜ëŠ” 21ê°œ ì† ê´€ì ˆ ì¤‘ Tipê³¼ PIP ê´€ì ˆì„ ë¹„êµí•˜ì—¬ ì†ê°€ë½ì´ í¼ì³ì¡ŒëŠ”ì§€ ì—¬ë¶€ íŒë‹¨
* ì†ëª© ê¸°ì¤€ìœ¼ë¡œ í™”ë©´ í•˜ë‹¨ì— ì†ê°€ë½ ê°œìˆ˜ ì •ë³´ë¥¼ **íˆ¬ëª…í•œ ë¸”ëŸ­ê³¼ í•¨ê»˜ í…ìŠ¤íŠ¸ë¡œ ì¶œë ¥**
* ì—„ì§€ ì†ê°€ë½ì€ ì† ë°©í–¥(ì™¼ì†/ì˜¤ë¥¸ì†)ì„ ê³ ë ¤í•˜ì—¬ ì¢Œìš° ë¹„êµ
* **ì†ë“± ë°©í–¥ì—ì„œë„ ì•ˆì •ì ìœ¼ë¡œ ì‘ë™**í•˜ë„ë¡ ë³´ì™„ë¨

```python
# ì†ê°€ë½ ê°œìˆ˜ ì¸ì‹ ì£¼ìš” ë¡œì§ ìš”ì•½
if label == 'Right':
    if lm[4].x < lm[3].x:  # ì—„ì§€
        count += 1
else:
    if lm[4].x > lm[3].x:
        count += 1

for tip, pip in zip([8,12,16,20], [6,10,14,18]):  # ê²€~ìƒˆë¼ì†ê°€ë½
    if lm[tip].y < lm[pip].y:
        count += 1
```

---

### ğŸ” ì†ë“± ë°©í–¥ ì²˜ë¦¬ê°€ ì–´ë ¤ìš´ ì´ìœ 

ì†ë°”ë‹¥ ê¸°ì¤€ìœ¼ë¡œ ì†ê°€ë½ì´ ì ‘í˜€ ìˆëŠ”ì§€ í¼ì³ì ¸ ìˆëŠ”ì§€ íŒë‹¨í•  ë•ŒëŠ”
Tipê³¼ PIPì˜ yì¢Œí‘œ ë¹„êµë¡œ ëŒ€ë¶€ë¶„ ì•ˆì •ì ì¸ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì†ë“± ë°©í–¥ì—ì„œëŠ” ì†ê°€ë½ì´ ì‚´ì§ êµ½í˜€ì ¸ ìˆì–´ë„ Tipê³¼ PIPì˜ ìœ„ì¹˜ê´€ê³„ê°€ ë’¤ë°”ë€Œë©° ì˜¤íŒì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ MediaPipeëŠ” ì†ì˜ zì¶• ì¢Œí‘œë„ ì œê³µí•˜ì§€ë§Œ, ì •í™•í•œ ë°©í–¥ íŒë³„ì—ëŠ” 3D ì¢Œí‘œ í•´ì„ì´ í•„ìš”í•˜ë©°
ì´ëŠ” ë‹¨ìˆœí•œ 2D ë¹„êµë³´ë‹¤ ë³µì¡ë„ê°€ ë†’ê³ , ì†ì˜ íšŒì „/ê¸°ìš¸ê¸°/ì™œê³¡ì— ë”°ë¼ ì¶”ê°€ ë³´ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ **ì†ë“± ë°©í–¥ì„ ì™„ë²½íˆ íŒë³„í•˜ë ¤ë©´ 3D ë²¡í„° ë¹„êµ ë˜ëŠ” ì‹œê³„ë°©í–¥/ë°˜ì‹œê³„ë°©í–¥ ë§ˆë”” ìˆœì„œ ë¶„ì„ ë“±ì˜ ë³´ì™„ ê¸°ë²•ì´ ìš”êµ¬**ë©ë‹ˆë‹¤.
ë³¸ ì‹¤ìŠµì—ì„œëŠ” ì´ëŸ¬í•œ ë³µì¡ì„±ì„ í”¼í•˜ê³ , ë‹¨ìˆœí•œ ì¢Œí‘œ ë¹„êµë¡œë„ ì¶©ë¶„íˆ ì•ˆì •ì ì¸ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë„ë¡ ë³´ì •ëœ ë¡œì§ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## ğŸ“‚ ì‚¬ìš© ì½”ë“œ: `02_finger_count.py`

|ğŸ“¹ ì˜ˆì‹œ ì˜ìƒ|
| --------------------------------------------------------------- |
|[finger\_count.mp4 (ì˜ìƒ ë³´ê¸°)](finger_count.mp4) |

ì „ì²´ êµ¬í˜„ ì½”ë“œëŠ” í•´ë‹¹ `.py` íŒŒì¼ì„ ì°¸ê³ í•˜ì„¸ìš”.
